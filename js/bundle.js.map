{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","js/src/main.js","js/src/header/NavLink.js","js/src/modules/WorkImage.js","js/src/utils/resizeCanvas.js"],"names":["initModules","className","constructor","i","els","doc","getElementsByClassName","length","NavLink","require","WorkImage","NAV_LINK_SELECTOR","WORK_IMAGE_SELECTOR","document","el","addHover","onMouseOut","e","tweenTo","addEventListener","removeEventListener","newX","remove","distance","currentHoverEl","tween","x","Cubic","easeIn","easeOut","TweenLite","to","ease","easeInOut","onUpdate","style","transform","onComplete","removeChild","createElement","appendChild","module","exports","resizeCanvas","onMouseOver","_videoEl","play","_progress","p","pause","currentTime","onLoaded","window","onResize","redraw","_parent","_context","drawImage","_image","_canvasWidth","_canvasHeight","drawMask","requestAnimationFrame","progress","lineTo","y","firstHalfProgress","Math","min","secondHalfProgress","max","save","beginPath","isTest","moveTo","round","closePath","clip","restore","_sizingEl","offsetWidth","offsetHeight","_canvasEl","getContext","_imgUrl","getAttribute","Image","src","loop","onload","getBackingStoreRatio","context","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","DEVICE_PIXEL_RATIO","devicePixelRatio","_backingStoreRatio","_canvasPixelRatio","canvasEl","width","height","oldWidth","oldHeight","scale"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var NavLink = require('./header/NavLink'),\n\tWorkImage = require('./modules/WorkImage'),\n\tNAV_LINK_SELECTOR = 'js-navLink',\n\tWORK_IMAGE_SELECTOR = 'js-workImage',\n\tdoc = document;\n\ninitModules(NAV_LINK_SELECTOR, NavLink);\ninitModules(WORK_IMAGE_SELECTOR, WorkImage);\n\nfunction initModules(className, constructor) {\n\n\tvar els = doc.getElementsByClassName(className),\n\t\ti;\n\n\tfor(i = 0; i < els.length; i++) {\n\n\t\tnew constructor(els[i]);\n\t}\n}\n\n","module.exports = NavLink;\nvar doc = document;\n\nfunction NavLink(el) {\n\n\tel.addEventListener('mouseenter', addHover);\n\n\tfunction addHover() {\n\n\t\tel.removeEventListener('mouseenter', addHover);\n\n\t\tvar currentHoverEl;\n\n\t\tcurrentHoverEl = doc.createElement('div');\n\t\tcurrentHoverEl.className = 'nav__link__hover';\n\t\tcurrentHoverEl.tween = {x:-100};\n\n\t\tel.appendChild(currentHoverEl);\n\t\ttweenTo(0);\n\n\t\tel.addEventListener('mouseleave', onMouseOut);\n\n\t\tfunction onMouseOut(e) {\n\n\t\t\ttweenTo(100, true);\n\n\t\t\tel.addEventListener('mouseenter', addHover);\n\t\t\tel.removeEventListener('mouseleave', onMouseOut);\n\t\t}\n\n\t\tfunction tweenTo(newX, remove) {\n\n\t\t\tvar distance = (newX - currentHoverEl.tween.x) / 100,\n\t\t\t\tease = newX > 0 ? Cubic.easeIn : Cubic.easeOut;\n\n\n\t\t\tTweenLite.to(currentHoverEl.tween, 0.35 * distance, {\n\t\t\t\tx:newX,\n\t\t\t\tease: Cubic.easeInOut,\n\t\t\t\tonUpdate:function(){\n\n\t\t\t\t\tcurrentHoverEl.style.transform = 'translateX(' + currentHoverEl.tween.x + '%)';\n\t\t\t\t},\n\t\t\t\tonComplete:function(){\n\n\t\t\t\t\tif(remove){\n\n\t\t\t\t\t\tel.removeChild(currentHoverEl);\n\t\t\t\t\t\tcurrentHoverEl = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n}","var resizeCanvas = require('../utils/resizeCanvas');\n\n\nmodule.exports = function(el) {\n\n\tvar _parent = el,\n\t\t_videoEl = document.createElement('video'),\n\t\t_sizingEl = el.getElementsByClassName('js-workImage__size')[0],\n\t\t_canvasEl = el.getElementsByClassName('js-workImage__canvas')[0],\n\t\t_context = _canvasEl.getContext('2d'),\n\t\t_progress = {p:0},\n\t\t_loadedCount = 0,\n\t\t_canvasWidth,\n\t\t_canvasHeight,\n\t\t_imgUrl = _canvasEl.getAttribute('data-jpg'),\n\t\t_image = new Image();\n\n\t_videoEl.src =  _canvasEl.getAttribute('data-mp4');\n\t_videoEl.loop= true;\n\n\t_image.onload = onLoaded;\n\t_image.src = _imgUrl;\n\n\n\tfunction onMouseOver(e) {\n\n\t\t_videoEl.play();\n\n\t\tTweenLite.to(_progress, 0.5, {\n\t\t\tp:1,\n\t\t\tease: Cubic.easeInOut,\n\t\t\tonComplete:function(){\n\n\t\t\t\t//_progress.p = 0;\n\t\t\t\t//_currentImage = _hover;\n\t\t\t\t//_upcomingImage = _image;\n\t\t\t}\n\t\t})\n\t}\n\n\tfunction onMouseOut() {\n\n\t\tTweenLite.to(_progress, 0.5, {\n\t\t\tp:0,\n\t\t\tease: Cubic.easeInOut,\n\t\t\tonComplete:function(){\n\n\t\t\t\t_videoEl.pause();\n\t\t\t\t_videoEl.currentTime = 0;\n\t\t\t}\n\t\t})\n\t}\n\n\n\tfunction onLoaded() {\n\n\t\twindow.addEventListener('resize', onResize);\n\t\tonResize();\n\n\t\tredraw();\n\n\t\t_parent.addEventListener('mouseenter', onMouseOver);\n\t\t_parent.addEventListener('mouseleave', onMouseOut);\n\t}\n\n\n\n\tfunction redraw() {\n\n\t\t_context.drawImage(_image, 0, 0, _canvasWidth, _canvasHeight);\n\n\t\tif(_progress.p > 0) {\n\n\t\t\tdrawMask(_progress.p);\n\t\t}\n\n\t\trequestAnimationFrame(redraw);\n\t}\n\n\n\tfunction drawMask(progress) {\n\n\t\tvar firstHalfProgress = Math.min(1, progress * 2),\n\t\t\tsecondHalfProgress = Math.max(0, (progress - 0.5) * 2);\n\n\t\t_context.save();\n\n\t\t_context.beginPath();\n\n\t\tif(window.isTest) {\n\n\t\t\t_context.moveTo(0, _canvasHeight);\n\t\t\tlineTo(Math.round(_canvasWidth * progress), _canvasHeight);\n\t\t\tlineTo(Math.round(_canvasWidth * progress), 0);\n\t\t\tlineTo(0, 0);\n\n\t\t} else {\n\n\t\t\t// start at bottom left\n\t\t\t_context.moveTo(0, _canvasHeight);\n\n\t\t\t// absolute line to bottom right, based on firstHalfProgress\n\t\t\tlineTo(Math.round(_canvasWidth * firstHalfProgress), _canvasHeight);\n\n\t\t\t// if we passed the first half, we draw two additional lines trying to fill up the screen\n\t\t\tif(secondHalfProgress) {\n\n\t\t\t\tlineTo(_canvasWidth, Math.round(_canvasHeight * (1 - secondHalfProgress)));\n\t\t\t\tlineTo(Math.round(_canvasWidth * secondHalfProgress), 0);\n\t\t\t}\n\n\n\n\t\t\t// absolute line back to top left, based on firstHalfProgress\n\t\t\tlineTo(0, Math.round(_canvasHeight * (1 - firstHalfProgress)));\n\t\t}\n\n\t\t// close up our path\n\t\t_context.closePath();\n\n\t\t_context.clip();\n\n\t\t_context.drawImage(_videoEl, 0, 0, _canvasWidth, _canvasHeight);\n\n\n\t\t_context.restore();\n\n\t\tfunction lineTo(x, y) {\n\n\t\t\t_context.lineTo(x, y);\n\t\t}\n\t}\n\n\tfunction onResize() {\n\n\t\t_canvasWidth = _sizingEl.offsetWidth;\n\t\t_canvasHeight = _sizingEl.offsetHeight;\n\n\t\tresizeCanvas(_canvasEl, _canvasWidth, _canvasHeight);\n\t}\n};","var DEVICE_PIXEL_RATIO = window.devicePixelRatio || 1,\n\t_backingStoreRatio,\n\t_canvasPixelRatio,\n\tcontext = document.createElement('canvas').getContext('2d');\n\n_backingStoreRatio = getBackingStoreRatio(context);\n_canvasPixelRatio = DEVICE_PIXEL_RATIO / _backingStoreRatio;\n\nfunction getBackingStoreRatio(context) {// eslint-disable-line\n\n\treturn context.webkitBackingStorePixelRatio ||\n\t\tcontext.mozBackingStorePixelRatio ||\n\t\tcontext.msBackingStorePixelRatio ||\n\t\tcontext.oBackingStorePixelRatio ||\n\t\tcontext.backingStorePixelRatio || 1;\n}\n\nmodule.exports = function(canvasEl, width, height) {\n\n\tvar oldWidth,\n\t\toldHeight,\n\t\tcontext = canvasEl.getContext('2d');\n\n\tcanvasEl.width = width;\n\tcanvasEl.height = height;\n\n\tif(DEVICE_PIXEL_RATIO !== _backingStoreRatio) {\n\n\t\toldWidth = canvasEl.width;\n\t\toldHeight = canvasEl.height;\n\n\t\tcanvasEl.width = oldWidth * _canvasPixelRatio;\n\t\tcanvasEl.height = oldHeight * _canvasPixelRatio;\n\n\t\tcanvasEl.style.width = oldWidth + 'px';\n\t\tcanvasEl.style.height = oldHeight + 'px';\n\n\t\tcontext.scale(_canvasPixelRatio, _canvasPixelRatio);\n\t}\n};"]}