(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function init(){_win.addEventListener("popstate",onPopState),_maskEl=_doc.querySelector(".mask"),_htmlEl=_doc.querySelector("html"),_contentEl=getContentEl(_doc),_maskEl.style.opacity=0,_doc.body.classList.add("is-visible"),_contentEl.classList.add("is-visible"),moduleFactory.run()}function internalLoad(n){hidePage(),ajaxRequest(n,function(n){var e,t=_doc.createElement("html");t.innerHTML=n,e=getContentEl(t),_pendingClass=e.getAttribute("data-class"),_pendingContent=e.innerHTML,showPage()})}function getContentEl(n){return n.querySelector(".js-content")}function pushState(n){_win.history.pushState({url:n},"",n),internalLoad(n)}function onPopState(){internalLoad(_win.location.pathname)}function hidePage(){_isHiding=!0,_maskEl.style.display="block",tweenMask(1,function(){_isHiding=!1,_pendingContent&&(window.scrollTo(0,0),_contentEl.innerHTML=_pendingContent,_htmlEl.className=_pendingClass,_pendingContent=!1,showPage())})}function showPage(){_isHiding||tweenMask(0,function(){_maskEl.style.display="none",moduleFactory.run(_contentEl)})}function tweenMask(n,e){var t;t=n>0?Cubic.easeOut:Cubic.easeIn,TweenLite.to(_maskEl.style,.25,{opacity:n,ease:t,onComplete:function(){e()}})}var ajaxRequest=require("../utils/ajaxRequest"),resizeCanvas=require("../utils/resizeCanvas"),moduleFactory=require("./moduleFactory"),_doc=document,_win=window,_htmlEl,_contentEl,_maskEl,_pendingClass=!1,_pendingContent=!1,_isHiding=!1;exports.init=init,exports.pushState=pushState;
},{"../utils/ajaxRequest":7,"../utils/resizeCanvas":8,"./moduleFactory":2}],2:[function(require,module,exports){
function run(e){e||(e=document),destroyModules(),_currentModules=[],createModules(e)}function destroyModules(){var e;for(e=0;e<_currentModules.length;e++)_currentModules[e].destroy()}function createModules(e){_moduleConfigs.forEach(function(r){var o,u,n,s=e.querySelectorAll(r.selector);for(n=0;n<s.length;n++)u=s[n],o=new r.constructor,o.init(u),u.classList.contains("js-moduleIgnore")||_currentModules.push(o)})}var _moduleConfigs=[require("../modules/AnyLink"),require("../modules/NavLink"),require("../modules/WorkImage")],_currentModules=[];exports.run=run;
},{"../modules/AnyLink":4,"../modules/NavLink":5,"../modules/WorkImage":6}],3:[function(require,module,exports){
var history=require("./core/history");history.init();
},{"./core/history":1}],4:[function(require,module,exports){
var history=require("../core/history");exports.selector="a",exports.constructor=function(){function t(t){o=t,i=t.getAttribute("href"),n(i)||o.addEventListener("click",e)}function e(t){t.preventDefault(),i!==window.location.pathname&&history.pushState(i)}function r(){o.removeEventListener("click",e),i=null,o=null}function n(t){var e=/^(\w+:)?\/\//;return void 0!==t&&-1!==t.search(e)}var i,o;this.init=t,this.destroy=r};
},{"../core/history":1}],5:[function(require,module,exports){
var MOUSE_ENTER_EVENT="mouseenter",MOUSE_LEAVE_EVENT="mouseleave";exports.selector=".js-navLink",exports.constructor=function(){function e(e){t=e,t.addEventListener(MOUSE_ENTER_EVENT,n)}function n(){function e(o){E(100,!0),t.addEventListener(MOUSE_ENTER_EVENT,n),t.removeEventListener(MOUSE_LEAVE_EVENT,e)}function E(e,n){var E=(e-o.tween.x)/100;TweenLite.to(o.tween,.35*E,{x:e,ease:Cubic.easeInOut,onUpdate:function(){o.style.transform="translateX("+o.tween.x+"%)"},onComplete:function(){n&&(t.removeChild(o),o=null)}})}var o;t.removeEventListener(MOUSE_ENTER_EVENT,n),o=document.createElement("div"),o.className="nav__link__hover",o.tween={x:-100},t.appendChild(o),E(0),t.addEventListener(MOUSE_LEAVE_EVENT,e)}var t;this.init=e};
},{}],6:[function(require,module,exports){
var resizeCanvas=require("../utils/resizeCanvas");exports.selector=".js-workImage",exports.constructor=function(){function e(e){m=!0,u=e,c=document.createElement("video"),d=e.getElementsByClassName("js-workImage__size")[0],l=e.getElementsByClassName("js-workImage__canvas")[0],v=l.getContext("2d"),f={p:0},g=0,h=l.getAttribute("data-jpg"),C=new Image,c.src=l.getAttribute("data-mp4"),c.loop=!0,C.onload=a,C.src=h}function t(){m=!1,C.onload=null,c=null,TweenLite.killTweensOf(f),u.removeEventListener("mouseenter",n),u.removeEventListener("mouseleave",o),window.removeEventListener("resize",r)}function n(){c.play(),TweenLite.to(f,.5,{p:1,ease:Cubic.easeInOut})}function o(){TweenLite.to(f,.5,{p:0,ease:Cubic.easeInOut,onComplete:function(){c.pause(),c.currentTime=0}})}function a(){window.addEventListener("resize",r),r(),s(),u.addEventListener("mouseenter",n),u.addEventListener("mouseleave",o)}function s(){v.drawImage(C,0,0,p,w),f.p>0&&i(f.p),m&&requestAnimationFrame(s)}function i(e){function t(e,t){v.lineTo(e,t)}var n=Math.min(1,2*e),o=Math.max(0,2*(e-.5));v.save(),v.beginPath(),v.moveTo(0,w),t(Math.round(p*n),w),o&&(t(p,Math.round(w*(1-o))),t(Math.round(p*o),0)),t(0,Math.round(w*(1-n))),v.closePath(),v.clip(),v.drawImage(c,0,0,p,w),v.restore()}function r(){p=d.offsetWidth,w=d.offsetHeight,resizeCanvas(l,p,w)}var u,m,c,d,l,v,f,g,p,w,h,C;this.init=e,this.destroy=t};
},{"../utils/resizeCanvas":8}],7:[function(require,module,exports){
module.exports=function(e,s,t){t||(t={});var n=new XMLHttpRequest,r=t.method||"GET";n.open(r,e,!0),t.responseType&&(n.responseType=t.responseType),n.onreadystatechange=function(){var e;4===n.readyState&&(200===n.status?(e=n.response,s(e)):console.error(n))},t.params&&n.setRequestHeader("Content-length",t.params.length),n.send(t.params)};
},{}],8:[function(require,module,exports){
function getBackingStoreRatio(t){return t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1}var DEVICE_PIXEL_RATIO=window.devicePixelRatio||1,_backingStoreRatio,_canvasPixelRatio,context=document.createElement("canvas").getContext("2d");_backingStoreRatio=getBackingStoreRatio(context),_canvasPixelRatio=DEVICE_PIXEL_RATIO/_backingStoreRatio,module.exports=function(t,i,e){var a,o,n=t.getContext("2d");t.width=i,t.height=e,DEVICE_PIXEL_RATIO!==_backingStoreRatio&&(a=t.width,o=t.height,t.width=a*_canvasPixelRatio,t.height=o*_canvasPixelRatio,t.style.width=a+"px",t.style.height=o+"px",n.scale(_canvasPixelRatio,_canvasPixelRatio))};
},{}]},{},[3])


//# sourceMappingURL=bundle.js.map