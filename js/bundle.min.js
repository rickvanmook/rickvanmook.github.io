(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function init(){_win.addEventListener("popstate",onPopState),_maskEl=_doc.querySelector(".mask"),_htmlEl=_doc.querySelector("html"),_contentEl=getContentEl(_doc),_maskEl.style.opacity=0,_doc.body.classList.add("is-visible"),_contentEl.classList.add("is-visible"),moduleFactory.run()}function internalLoad(e){signals.HISTORY_CHANGED.dispatch(e),hidePage(),ajaxRequest(e,function(e){var n,t=_doc.createElement("html");t.innerHTML=e,n=getContentEl(t),_pendingClass=n.getAttribute("data-class"),_pendingContent=n.innerHTML,showPage()})}function getContentEl(e){return e.querySelector(".js-content")}function pushState(e){_win.history.pushState({url:e},"",e),internalLoad(e)}function onPopState(){internalLoad(_win.location.pathname)}function hidePage(){_isHiding=!0,_maskEl.style.display="block",tweenMask(1,function(){_isHiding=!1,_pendingContent&&(window.scrollTo(0,0),_contentEl.innerHTML=_pendingContent,_htmlEl.className=_pendingClass,_pendingContent=!1,showPage())})}function showPage(){_isHiding||tweenMask(0,function(){_maskEl.style.display="none",TweenLite.delayedCall(.15,function(){moduleFactory.run(_contentEl)})})}function tweenMask(e,n){var t;t=e>0?Cubic.easeOut:Cubic.easeIn,TweenLite.to(_maskEl.style,.25,{opacity:e,ease:t,onComplete:function(){n()}})}var ajaxRequest=require("../utils/ajaxRequest"),resizeCanvas=require("../utils/resizeCanvas"),signals=require("./signals"),moduleFactory=require("./moduleFactory"),_doc=document,_win=window,_htmlEl,_contentEl,_maskEl,_pendingClass=!1,_pendingContent=!1,_isHiding=!1;exports.init=init,exports.pushState=pushState;
},{"../utils/ajaxRequest":9,"../utils/resizeCanvas":10,"./moduleFactory":2,"./signals":3}],2:[function(require,module,exports){
function run(e){e||(e=document),destroyModules(),_currentModules=[],createModules(e)}function destroyModules(){var e;for(e=0;e<_currentModules.length;e++)_currentModules[e].destroy()}function createModules(e){_moduleConfigs.forEach(function(r){var o,u,n,s=e.querySelectorAll(r.selector);for(n=0;n<s.length;n++)u=s[n],o=new r.constructor,o.init(u),u.classList.contains("js-moduleIgnore")||_currentModules.push(o)})}var _moduleConfigs=[require("../modules/AnyLink"),require("../modules/NavLink"),require("../modules/WorkImage")],_currentModules=[];exports.run=run;
},{"../modules/AnyLink":6,"../modules/NavLink":7,"../modules/WorkImage":8}],3:[function(require,module,exports){
var Signal=require("../libs/signals");exports.HISTORY_CHANGED=new Signal;
},{"../libs/signals":4}],4:[function(require,module,exports){
!function(i){function t(i,t,n,e,s){this._listener=t,this._isOnce=n,this.context=e,this._signal=i,this._priority=s||0}function n(i,t){if("function"!=typeof i)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}function e(){this._bindings=[],this._prevParams=null;var i=this;this.dispatch=function(){e.prototype.dispatch.apply(i,arguments)}}t.prototype={active:!0,params:null,execute:function(i){var t,n;return this.active&&this._listener&&(n=this.params?this.params.concat(i):i,t=this._listener.apply(this.context,n),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},e.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(i,n,e,s){var r,o=this._indexOfListener(i,e);if(-1!==o){if(r=this._bindings[o],r.isOnce()!==n)throw new Error("You cannot add"+(n?"":"Once")+"() then add"+(n?"Once":"")+"() the same listener without removing the relationship first.")}else r=new t(this,i,n,e,s),this._addBinding(r);return this.memorize&&this._prevParams&&r.execute(this._prevParams),r},_addBinding:function(i){var t=this._bindings.length;do--t;while(this._bindings[t]&&i._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,i)},_indexOfListener:function(i,t){for(var n,e=this._bindings.length;e--;)if(n=this._bindings[e],n._listener===i&&n.context===t)return e;return-1},has:function(i,t){return-1!==this._indexOfListener(i,t)},add:function(i,t,e){return n(i,"add"),this._registerListener(i,!1,t,e)},addOnce:function(i,t,e){return n(i,"addOnce"),this._registerListener(i,!0,t,e)},remove:function(i,t){n(i,"remove");var e=this._indexOfListener(i,t);return-1!==e&&(this._bindings[e]._destroy(),this._bindings.splice(e,1)),i},removeAll:function(){for(var i=this._bindings.length;i--;)this._bindings[i]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(i){if(this.active){var t,n=Array.prototype.slice.call(arguments),e=this._bindings.length;if(this.memorize&&(this._prevParams=n),e){t=this._bindings.slice(),this._shouldPropagate=!0;do e--;while(t[e]&&this._shouldPropagate&&t[e].execute(n)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var s=e;s.Signal=e,"function"==typeof define&&define.amd?define(function(){return s}):"undefined"!=typeof module&&module.exports?module.exports=s:i.signals=s}(this);
},{}],5:[function(require,module,exports){
var history=require("./core/history");history.init();
},{"./core/history":1}],6:[function(require,module,exports){
var history=require("../core/history");exports.selector="a",exports.constructor=function(){function t(t){o=t,i=t.getAttribute("href"),n(i)||o.addEventListener("click",e)}function e(t){t.preventDefault(),i!==window.location.pathname&&history.pushState(i)}function r(){o.removeEventListener("click",e),i=null,o=null}function n(t){var e=/^(\w+:)?\/\//;return void 0!==t&&-1!==t.search(e)}var i,o;this.init=t,this.destroy=r};
},{"../core/history":1}],7:[function(require,module,exports){
var signals=require("../core/signals"),MOUSE_ENTER_EVENT="mouseenter",MOUSE_LEAVE_EVENT="mouseleave";exports.selector=".js-navLink",exports.constructor=function(){function e(e){i=e,i.addEventListener(MOUSE_ENTER_EVENT,t),a=E(i.getAttribute("href")),signals.HISTORY_CHANGED.add(n)}function n(){var e=E(window.location.pathname);e===a?i.classList.add("is-active"):i.classList.remove("is-active")}function t(){function e(E){n(100,!0),i.addEventListener(MOUSE_ENTER_EVENT,t),i.removeEventListener(MOUSE_LEAVE_EVENT,e)}function n(e,n){var t=(e-E.tween.x)/100;TweenLite.to(E.tween,.35*t,{x:e,ease:Cubic.easeInOut,onUpdate:function(){E.style.transform="translateX("+E.tween.x+"%)"},onComplete:function(){n&&(i.removeChild(E),E=null)}})}var E;i.removeEventListener(MOUSE_ENTER_EVENT,t),E=document.createElement("div"),E.className="nav__link__hover",E.tween={x:-100},i.appendChild(E),n(0),i.addEventListener(MOUSE_LEAVE_EVENT,e)}function E(e){return e.replace(/\//g,"")}var i,a;this.init=e};
},{"../core/signals":3}],8:[function(require,module,exports){
var resizeCanvas=require("../utils/resizeCanvas");exports.selector=".js-workImage",exports.constructor=function(){function e(e){r=e,l=e.getElementsByClassName("js-workImage__size")[0],v=e.getElementsByClassName("js-workImage__canvas")[0],f=v.getContext("2d"),g={p:0},d=0,w=v.getAttribute("data-jpg"),u=v.getAttribute("data-mp4"),C=new Image}function t(){m=!1,C.onload=null,c=null,TweenLite.killTweensOf(g),r.removeEventListener("mouseenter",n),r.removeEventListener("mouseleave",a),window.removeEventListener("resize",i)}function n(){m=!0,o(),c.play(),TweenLite.to(g,.5,{p:1,ease:Cubic.easeInOut})}function a(){TweenLite.to(g,.5,{p:0,ease:Cubic.easeInOut,onComplete:function(){c.pause(),c.currentTime=0,m=!1}})}function o(){f.drawImage(C,0,0,p,h),g.p>0&&s(g.p),m&&requestAnimationFrame(o)}function s(e){function t(e,t){f.lineTo(e,t)}var n=Math.min(1,2*e),a=Math.max(0,2*(e-.5));f.save(),f.beginPath(),f.moveTo(0,h),t(Math.round(p*n),h),a&&(t(p,Math.round(h*(1-a))),t(Math.round(p*a),0)),t(0,Math.round(h*(1-n))),f.closePath(),f.clip(),f.drawImage(c,0,0,p,h),f.restore()}function i(){p=l.offsetWidth,h=l.offsetHeight,resizeCanvas(v,p,h),m||o()}var r,u,m,c,l,v,f,g,d,p,h,w,C;this.init=e,this.destroy=t};
},{"../utils/resizeCanvas":10}],9:[function(require,module,exports){
module.exports=function(e,s,t){t||(t={});var n=new XMLHttpRequest,r=t.method||"GET";n.open(r,e,!0),t.responseType&&(n.responseType=t.responseType),n.onreadystatechange=function(){var e;4===n.readyState&&(200===n.status?(e=n.response,s(e)):console.error(n))},t.params&&n.setRequestHeader("Content-length",t.params.length),n.send(t.params)};
},{}],10:[function(require,module,exports){
function getBackingStoreRatio(t){return t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1}var DEVICE_PIXEL_RATIO=window.devicePixelRatio||1,_backingStoreRatio,_canvasPixelRatio,context=document.createElement("canvas").getContext("2d");_backingStoreRatio=getBackingStoreRatio(context),_canvasPixelRatio=DEVICE_PIXEL_RATIO/_backingStoreRatio,module.exports=function(t,i,e){var a,o,n=t.getContext("2d");t.width=i,t.height=e,DEVICE_PIXEL_RATIO!==_backingStoreRatio&&(a=t.width,o=t.height,t.width=a*_canvasPixelRatio,t.height=o*_canvasPixelRatio,t.style.width=a+"px",t.style.height=o+"px",n.scale(_canvasPixelRatio,_canvasPixelRatio))};
},{}]},{},[5])


//# sourceMappingURL=bundle.js.map